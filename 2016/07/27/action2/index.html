<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Kevin" />



<meta name="description" content="bean的三种装载方式！！！">
<meta property="og:type" content="article">
<meta property="og:title" content="Bean的装配">
<meta property="og:url" content="http://kevin7R.github.io/2016/07/27/action2/index.html">
<meta property="og:site_name" content="SimpleProgromerFans">
<meta property="og:description" content="bean的三种装载方式！！！">
<meta property="og:updated_time" content="2016-07-28T07:22:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bean的装配">
<meta name="twitter:description" content="bean的三种装载方式！！！">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="SimpleProgromerFans" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Bean的装配 | SimpleProgromerFans</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Kevin</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Simple Programmer Fans</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        <li>Friends</li>
                        
                        
                        <li>About Me</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:chenmeng.1886@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wyz/">wyz</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://simpleprogrammer.com/">SimpleProgrammer</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">hope is not a strategy in software development</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Kevin</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Kevin</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Simple Programmer Fans</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:chenmeng.1886@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap"><article id="post-action2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/27/action2/" class="article-date">
      <time datetime="2016-07-27T02:13:20.000Z" itemprop="datePublished">2016-07-27</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Bean的装配
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/程序开发/">程序开发</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><excerpt in="" index="" |="" 首页摘要=""><br>bean的三种装载方式！！！<a id="more"></a></excerpt></p>
<the rest="" of="" contents="" |="" 余下全文="">

<h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><p>这一章主要讲解一下Bean的三种装载方式：</p>
<ol>
<li>自动装载</li>
<li>基于java文件的装载</li>
<li>基于xml文件的装载</li>
</ol>
<p>个人推荐：优先使用1，其次是2，再次是3.</p>
<p><strong>（这里个人觉得用英文解释更加清楚一点）
</strong></p>
<p>理由：The less configuration you have to do explicitly, the better. When you must explicitly configure beans (such as when you’re configuring beans for which you don’t maintain the source code), I’d favor the type-safe and more powerful JavaConfig over XML. Finally, fall back on XML only in situations where there’s a convenient XML namespace you want to use that has no equivalent in JavaConfig. </p>
<h3 id="自动装载"><a href="#自动装载" class="headerlink" title="自动装载"></a>自动装载</h3><p>自动装载需要满足两个条件：</p>
<ol>
<li>暴露bean</li>
<li>装载bean</li>
</ol>
<p>自动装载是通过注解的形式来实现的，下面的例子中会介绍自动装载是通过哪些注解来满足这两个条件的。</p>
<h4 id="Component"><a href="#Component" class="headerlink" title="@Component"></a>@Component</h4><p>使用@Component来标示一个bean：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@Component</div><div class="line">public class SgtPepper implements CompactDisc &#123;</div><div class="line"></div><div class="line">    private String title = &quot;Sgt. Pepper&apos;s Lonely Heart Club Band&quot;;</div><div class="line">    private String author = &quot;The Beatles&quot;;</div><div class="line">    public void play() &#123;</div><div class="line">        System.out.println(&quot;Play &quot; + title + &quot; by &quot; + author);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过@Component，也可以给Bean命名，如：@Component(“LonelyHeartClub”)就可以在Spring的容器中声明一个名叫LonelyHeartClub的bean。</p>
<h4 id="Configuration和-ComponentScan"><a href="#Configuration和-ComponentScan" class="headerlink" title="@Configuration和@ComponentScan"></a>@Configuration和@ComponentScan</h4><p>使用@Configuration来声明配置类，使用@ComponentScan来使Spring容器中的组件可见。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@Configuration</div><div class="line">@ComponentScan</div><div class="line">public class CDPlayerConfig &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里简单介绍一下@ComponentScan，默认情况下用这个组件标示后，会将该文件所在的目录下的bean暴露出来。主要看一下basePackages和basePackageClasses这两个选项，下面先看两个例子：</p>
<p>@ComponentScan(basePackages={“soundsystem”, “video”})<br>@ComponentScan(basePackageClasses={CDPlayer.class, DVDPlayer.class})</p>
<p>basePackages可以设置哪些目录下的bean会暴露出来。basePackageClasses设置的是哪些类型的bean会暴露出来。<br>二者不能同时使用。</p>
<h4 id="ContextConfiguration和-Autowired"><a href="#ContextConfiguration和-Autowired" class="headerlink" title="@ContextConfiguration和@Autowired"></a>@ContextConfiguration和@Autowired</h4><p>通过@ContextConfiguration 来使用被@ComponentScan注解的文件。使用@Autowired来进行装配。关于@ComponentScan更多选项，可以查看<a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/annotation/ComponentScan.html" target="_blank" rel="external">官方文档</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">@RunWith(SpringJUnit4ClassRunner.class)</div><div class="line">@ContextConfiguration( classes = CDPlayerConfig.class)</div><div class="line">public class SgtPepperTest &#123;</div><div class="line"></div><div class="line">    @Autowired</div><div class="line">    private CompactDisc cd;</div><div class="line"></div><div class="line">    @Test</div><div class="line">    public void cdIsNotNull() &#123;</div><div class="line">        assertNotNull(cd);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Test</div><div class="line">    public void playTest() &#123;</div><div class="line">        cd.play();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="运行程序中的playTest方法"><a href="#运行程序中的playTest方法" class="headerlink" title="运行程序中的playTest方法"></a>运行程序中的playTest方法</h4><p>得出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Play Sgt. Pepper&apos;s Lonely Heart Club Band by The Beatles</div><div class="line"></div><div class="line">Process finished with exit code 0</div></pre></td></tr></table></figure>
<p>对于这个小demo，主要用到了(@Component, @Autowired)和（@Configuration，@ComponentScan，@ContextConfiguration( classes = CDPlayerConfig.class)<br>）。前两个用来装载bean，后3个用来暴露bean。这两个条件完成了，自动装载也就OK了。</p>
<h3 id="基于java文件的装载"><a href="#基于java文件的装载" class="headerlink" title="基于java文件的装载"></a>基于java文件的装载</h3><p>在这种装载中在java文件所起的作用，基本上就等于@ComponentScan 加 bean的装载。所以只需修改CDPlayerConfig类然后执行前文中的测试用例就会出现完全相同的结果了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@Configuration</div><div class="line">public class CDPlayerConfig &#123;</div><div class="line">   </div><div class="line">    @Bean(name = &quot;lonelyHeartBandClub&quot;)</div><div class="line">    public CompactDisc sgtPepper() &#123;</div><div class="line"></div><div class="line">        return new SgtPepper();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Bean</div><div class="line">    public CDPlayer cdPlayer() &#123;</div><div class="line">        return new CDPlayer(sgtPepper());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>@Bean如果不特定指定name的话，默认使用@Bean注解的方法名。另外看下面例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">@Configuration</div><div class="line">public class CDPlayerConfig &#123;</div><div class="line">   </div><div class="line">    @Bean(name = &quot;lonelyHeartBandClub&quot;)</div><div class="line">    public CompactDisc sgtPepper() &#123;</div><div class="line"></div><div class="line">        return new SgtPepper();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Bean</div><div class="line">    public CDPlayer cdPlayer() &#123;</div><div class="line">        return new CDPlayer(sgtPepper());</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    @Bean</div><div class="line">    public CDPlayer anotherCDPlayer() &#123;</div><div class="line">        return new CDPlayer(sgtPepper());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>由于默认情况下Spring中所有的bean都是单例的，所以当第二次执行sgtPepper()时，该方法会被拦截，然后直接返回CompactDisc类型的那个bean。所以，所有CDPlayer类型的bean装载cd的时候，都是用的sgtPepper这个bean。</p>
<h3 id="基于xml文件的装载"><a href="#基于xml文件的装载" class="headerlink" title="基于xml文件的装载"></a>基于xml文件的装载</h3><h4 id="基于构造函数的装载"><a href="#基于构造函数的装载" class="headerlink" title="基于构造函数的装载"></a>基于构造函数的装载</h4><p>首先要创建一个xml文件，然后声明一个bean，接下来在进行装载配置。基于构造函数和基于setter的装载，主要有两种实现方式：</p>
<ol>
<li>constructor-arg 和 property</li>
<li>c-namespace 和 p-namespace</li>
</ol>
<p>因为已经有很多的材料上面介绍过<constructor-arg> 和 <property>的用法，这里就只讲下第二种实现方式。针对于这两种实现方式，没有孰优孰劣，只是仅凭个人喜好（我经常使用第二种实现方式）。若非要找出什么好处的话，那第二种方式唯一的好处就是格式上比第一种更简洁一些。</property></constructor-arg></p>
<h4 id="添加相应的schema"><a href="#添加相应的schema" class="headerlink" title="添加相应的schema"></a>添加相应的schema</h4><p>在xml默认的header中是没有c-namespace 和 p-namespace的schema的。所以在使用它们之前，要先在header中添加相应的schema，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">xmlns:c=&quot;http://www.springframework.org/schema/c&quot;</div><div class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</div></pre></td></tr></table></figure>
<p>下面看c和p的例子：</p>
<h5 id="c-namespace"><a href="#c-namespace" class="headerlink" title="c-namespace"></a>c-namespace</h5><p>当指定参数名称时，如c:compactDisc-ref，这里就会直接给构造函数中的compactDisc这个参数赋值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;bean id=&quot;cdPlayer&quot; class=&quot;soundsystem.CDPlayer&quot; c:compactDisc-ref=&quot;compactDisc&quot; /&gt;</div></pre></td></tr></table></figure>
<p>当使用c:_0、c:_1 ……等时，会按照顺序给构造函数中的参数赋值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;bean id=&quot;compactDisc&quot; class=&quot;soundsystem.BlankDisc&quot; c:_0=&quot;Sgt. Pepper&apos;s Lonely Hearts Band Club&quot; c:_1=&quot;The Beatles&quot; /&gt;</div></pre></td></tr></table></figure>
<p>当未指定参数名称时，这里默认会依次给构造函数中的参数赋值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;bean id=&quot;cdPlayer&quot; class=&quot;soundsystem.CDPlayer&quot; c:cd-ref=&quot;compactDisc&quot; /&gt;</div></pre></td></tr></table></figure>
<p>当参数是list，map，set等时，经常会使用util这个元素，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;util:list id=&quot;trackList&quot;&gt;</div><div class="line">        &lt;value&gt;Sgt. Pepper&apos;s Lonely Hearts Club Band&lt;/value&gt;</div><div class="line">        &lt;value&gt;With a Little Help from My Friends&lt;/value&gt;</div><div class="line">        &lt;value&gt;Lucy in the Sky with Diamonds&lt;/value&gt;</div><div class="line">        &lt;value&gt;Getting Better&lt;/value&gt;</div><div class="line">        &lt;value&gt;Fixing a Hole&lt;/value&gt;</div><div class="line">        &lt;!-- ...other tracks omitted for brevity... --&gt;</div><div class="line">&lt;/util:list&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;bean id=&quot;compactDisc&quot; class=&quot;soundsystem.BlankDisc&quot; c:_0=&quot;Sgt. Pepper&apos;s Lonely Hearts Band Club&quot; c:_1=&quot;The Beatles&quot; c:tracks-ref=&quot;trackList&quot;&gt;</div><div class="line">&lt;/bean&gt;</div></pre></td></tr></table></figure>
<h5 id="p-namespace"><a href="#p-namespace" class="headerlink" title="p-namespace"></a>p-namespace</h5><p>p-namespace的用法同c-namespace,只不过p没有模糊制定，必须明确指定参数的名称。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;bean id=&quot;compactDiscP&quot; class=&quot;soundsystem.BlankDisc&quot; p:title=&quot;Sgt. Pepper&apos;s Lonely Hearts Band Club&quot; p:author=&quot;The Beatles&quot; p:tracks-ref=&quot;trackList&quot;&gt;</div><div class="line">&lt;/bean&gt;</div></pre></td></tr></table></figure>
<h3 id="多种方式的混合使用"><a href="#多种方式的混合使用" class="headerlink" title="多种方式的混合使用"></a>多种方式的混合使用</h3><p>混合使用体现在代码上就是配置文件的混合使用，下面将一一列举：</p>
<h4 id="假设1"><a href="#假设1" class="headerlink" title="假设1"></a>假设1</h4><p>这里有两个java配置文件CDPlayerConfig.java和DVDPlayerConfig.java。将CDPlayerConfig.java中的beans添加到DVDPlayerConfig.java中。</p>
<p>java配置文件混合java配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@Configuration@Import(CDPlayerConfig.class)public class DVDPlayerConfig &#123;</div></pre></td></tr></table></figure>
<p>java配置文件混合xml配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@Configuration@ImportResource(&quot;classpath:context.xml&quot;)public class DVDPlayerConfig &#123;</div></pre></td></tr></table></figure>
<h4 id="假设2"><a href="#假设2" class="headerlink" title="假设2"></a>假设2</h4><p>这里有两个java配置文件CDPlayerConfig.java和context.xml。将CDPlayerConfig.java中的beans添加到context.xml中。</p>
<p>xml配置文件混合java配置文件:<br>在context.xml中添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;bean class=&quot;soundsystem.CDConfig&quot; /&gt;</div></pre></td></tr></table></figure>
<p>xml配置文件混合xml配置文件:<br>在context.xml中添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;import resource=&quot;cdplayer-config.xml&quot; /&gt;</div></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在这一篇博客中，主要讲了bean的3种装配方式。这里个人着重推荐你使用自动装配的方式，除非你不得不使用其他两种方式，如使用第三方库。这一章只是为学习以后spring的学习打下了一个基础，下面一章我会将更先进的装配技术介绍给大家。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ol>
<li>Spring in Action 第二章</li>
<li><a href="http://docs.spring.io/spring/docs/current/javadoc-api/allclasses-noframe.html" target="_blank" rel="external">http://docs.spring.io/spring/docs/current/javadoc-api/allclasses-noframe.html</a></li>
<li><a href="http://chariotsolutions.com/blog/post/spring-3-1-constructor-namespace-2/" target="_blank" rel="external">http://chariotsolutions.com/blog/post/spring-3-1-constructor-namespace-2/</a></li>
<li><a href="http://luyuanliang.iteye.com/blog/2154805" target="_blank" rel="external">http://luyuanliang.iteye.com/blog/2154805</a></li>
<li><a href="http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/xsd-config.html" target="_blank" rel="external">http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/xsd-config.html</a></li>
</ol>
<h3 id="demo代码下载"><a href="#demo代码下载" class="headerlink" title="demo代码下载"></a>demo代码下载</h3><p><a href="https://github.com/kevin7R/spring.github.io/tree/master/wiring" target="_blank" rel="external">https://github.com/kevin7R/spring.github.io/tree/master/wiring</a></p>
</the>
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>Title:</span><a href="/2016/07/27/action2/">Bean的装配</a></p>
        <p><span>Author:</span><a href="/" title="Back to Homepage">Kevin</a></p>
        <p><span>Created:</span>2016-07-27, 10:13:20</p>
        <p><span>Updated:</span>2016-07-28, 15:22:37</p>
        <p>
            <span>Full URL:</span><a class="post-url" href="/2016/07/27/action2/" title="Bean的装配">http://kevin7R.github.io/2016/07/27/action2/</a>
            <span class="copy-path" data-clipboard-text="From http://kevin7R.github.io/2016/07/27/action2/　　By Kevin" title="Copy Article&#39;s Link &amp; Author"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>License:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"CC BY-NC-SA 4.0"</a> Keep Link &amp; Author if Distribute.
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2016/08/01/advancewiring/">
                    bean的高级装配
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/07/22/pomodoro/">
                    Pomodoro
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring"><span class="toc-number">1.</span> <span class="toc-text">Spring</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#自动装载"><span class="toc-number">1.1.</span> <span class="toc-text">自动装载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Component"><span class="toc-number">1.1.1.</span> <span class="toc-text">@Component</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Configuration和-ComponentScan"><span class="toc-number">1.1.2.</span> <span class="toc-text">@Configuration和@ComponentScan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ContextConfiguration和-Autowired"><span class="toc-number">1.1.3.</span> <span class="toc-text">@ContextConfiguration和@Autowired</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#运行程序中的playTest方法"><span class="toc-number">1.1.4.</span> <span class="toc-text">运行程序中的playTest方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基于java文件的装载"><span class="toc-number">1.2.</span> <span class="toc-text">基于java文件的装载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基于xml文件的装载"><span class="toc-number">1.3.</span> <span class="toc-text">基于xml文件的装载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#基于构造函数的装载"><span class="toc-number">1.3.1.</span> <span class="toc-text">基于构造函数的装载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加相应的schema"><span class="toc-number">1.3.2.</span> <span class="toc-text">添加相应的schema</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#c-namespace"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">c-namespace</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#p-namespace"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">p-namespace</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多种方式的混合使用"><span class="toc-number">1.4.</span> <span class="toc-text">多种方式的混合使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#假设1"><span class="toc-number">1.4.1.</span> <span class="toc-text">假设1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#假设2"><span class="toc-number">1.4.2.</span> <span class="toc-text">假设2</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结"><span class="toc-number">1.5.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考"><span class="toc-number">1.6.</span> <span class="toc-text">参考</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#demo代码下载"><span class="toc-number">1.7.</span> <span class="toc-text">demo代码下载</span></a></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="Hide"  title="Show or Hide Table of Contents">

    <script>
        yiliaConfig.toc = ["Hide", "Show", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"Bean的装配　| SimpleProgromerFans　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
        <section class="youyan" id="comments">
    <script>
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = 'http://v2.uyan.cc/code/uyan.js?uid=2106057';
            (d.head || d.body).appendChild(s);
        }
    </script>
    
    <script> loadComment(); </script>

    <div id="uyan_frame"></div>
</section>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/08/01/advancewiring/" title="Pre: bean的高级装配">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="Mini Archives"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/07/22/pomodoro/" title="Next: Pomodoro">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/08/08/swap/">swap</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/05/springaop/">AOP</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/01/advancewiring/">bean的高级装配</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/action2/">Bean的装配</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/22/pomodoro/">Pomodoro</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/20/uncompleted/">未完成</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/16/signs/">Hidden Signs That It's Time To Leave Your Job</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/12/action/">Spring in action</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/10/hope/">Hope Is Not a Strategy in Software Development</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/06/hello-world/">Simple Programer Fans</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016 Kevin
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >Site Visitors: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">Page Hits: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>